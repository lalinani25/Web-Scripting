let data = {
    "name": "USImmigrants", "children": [
        {
            "name": "Mexico", "children": [
                { year: "2011", nrimmigrants: 143446, "stat": 152 },
                { year: "2012", nrimmigrants: 146406, "stat": 155 },
                { year: "2013", nrimmigrants: 135028, "stat": 144 },
                { year: "2014", nrimmigrants: 134052, "stat": 143 },
                { year: "2015", nrimmigrants: 158619, "stat": 167 },
                { year: "2016", nrimmigrants: 174534, "stat": 183 },
                { year: "2017", nrimmigrants: 170581, "stat": 179 },
                { year: "2018", nrimmigrants: 161858, "stat": 170 },
                { year: "2019", nrimmigrants: 156052, "stat": 165 },
                { year: "2020", nrimmigrants: 100325, "stat": 109 }

            ]
        },
        {
            "name": "China", "children": [
                { year: "2011", nrimmigrants: 87016, "stat": 96 },
                { year: "2012", nrimmigrants: 81684, "stat": 90 },
                { year: "2013", nrimmigrants: 71798, "stat": 80 },
                { year: "2014", nrimmigrants: 76089, "stat": 85 },
                { year: "2015", nrimmigrants: 74558, "stat": 83 },
                { year: "2016", nrimmigrants: 81772, "stat": 90 },
                { year: "2017", nrimmigrants: 71565, "stat": 80 },
                { year: "2018", nrimmigrants: 65214, "stat": 74 },
                { year: "2019", nrimmigrants: 62248, "stat": 71 },
                { year: "2020", nrimmigrants: 41483, "stat": 50 }

            ]
        },
        {
            "name": "India", "children": [
                { year: "2011", nrimmigrants: 69013, "stat": 78 },
                { year: "2012", nrimmigrants: 66434, "stat": 75 },
                { year: "2013", nrimmigrants: 68458, "stat": 77 },
                { year: "2014", nrimmigrants: 77908, "stat": 86 },
                { year: "2015", nrimmigrants: 64116, "stat": 73 },
                { year: "2016", nrimmigrants: 64687, "stat": 73 },
                { year: "2017", nrimmigrants: 60394, "stat": 69 },
                { year: "2018", nrimmigrants: 59821, "stat": 68 },
                { year: "2019", nrimmigrants: 54495, "stat": 63 },
                { year: "2020", nrimmigrants: 46363, "stat": 55 }

            ]
        },
        {
            "name": "South Korea", "children": [
                { year: "2011", nrimmigrants: 22824, "stat": 31 },
                { year: "2012", nrimmigrants: 20846, "stat": 29 },
                { year: "2013", nrimmigrants: 23166, "stat": 32 },
                { year: "2014", nrimmigrants: 20423, "stat": 29 },
                { year: "2015", nrimmigrants: 17138, "stat": 26 },
                { year: "2016", nrimmigrants: 21801, "stat": 30 },
                { year: "2017", nrimmigrants: 19194, "stat": 28 },
                { year: "2018", nrimmigrants: 17676, "stat": 26 },
                { year: "2019", nrimmigrants: 18479, "stat": 27 },
                { year: "2020", nrimmigrants: 16244, "stat": 25 }

            ]
        }, {
            "name": "Canada", "children": [
                { year: "2011", nrimmigrants: 12800, "stat": 21 },
                { year: "2012", nrimmigrants: 12932, "stat": 21 },
                { year: "2013", nrimmigrants: 13181, "stat": 22 },
                { year: "2014", nrimmigrants: 11586, "stat": 20 },
                { year: "2015", nrimmigrants: 12673, "stat": 21 },
                { year: "2016", nrimmigrants: 12793, "stat": 21 },
                { year: "2017", nrimmigrants: 11484, "stat": 20 },
                { year: "2018", nrimmigrants: 9898, "stat": 18 },
                { year: "2019", nrimmigrants: 11388, "stat": 20 },
                { year: "2020", nrimmigrants: 9526, "stat": 18 }

            ]
        }, {
            "name": "United Kingdom", "children": [
                { year: "2011", nrimmigrants: 11572, "stat": 20 },
                { year: "2012", nrimmigrants: 12014, "stat": 21 },
                { year: "2013", nrimmigrants: 12984, "stat": 21 },
                { year: "2014", nrimmigrants: 12225, "stat": 21 },
                { year: "2015", nrimmigrants: 12592, "stat": 21 },
                { year: "2016", nrimmigrants: 12673, "stat": 21 },
                { year: "2017", nrimmigrants: 10948, "stat": 19 },
                { year: "2018", nrimmigrants: 9908, "stat": 18 },
                { year: "2019", nrimmigrants: 11337, "stat": 20 },
                { year: "2020", nrimmigrants: 9655, "stat": 18 }

            ]
        }, {
            "name": "Germany", "children": [
                { year: "2011", nrimmigrants: 6125, "stat": 15 },
                { year: "2012", nrimmigrants: 5812, "stat": 14 },
                { year: "2013", nrimmigrants: 6032, "stat": 15 },
                { year: "2014", nrimmigrants: 5584, "stat": 14 },
                { year: "2015", nrimmigrants: 5436, "stat": 14 },
                { year: "2016", nrimmigrants: 5306, "stat": 14 },
                { year: "2017", nrimmigrants: 4662, "stat": 13 },
                { year: "2018", nrimmigrants: 4443, "stat": 13 },
                { year: "2019", nrimmigrants: 4848, "stat": 13 },
                { year: "2020", nrimmigrants: 3913, "stat": 12 }

            ]
        }, {
            "name": "Japan", "children": [
                { year: "2011", nrimmigrants: 6161, "stat": 15 },
                { year: "2012", nrimmigrants: 6061, "stat": 15 },
                { year: "2013", nrimmigrants: 5925, "stat": 14 },
                { year: "2014", nrimmigrants: 5545, "stat": 14 },
                { year: "2015", nrimmigrants: 5395, "stat": 14 },
                { year: "2016", nrimmigrants: 5207, "stat": 14 },
                { year: "2017", nrimmigrants: 4635, "stat": 13 },
                { year: "2018", nrimmigrants: 4317, "stat": 13 },
                { year: "2019", nrimmigrants: 4503, "stat": 13 },
                { year: "2020", nrimmigrants: 3905, "stat": 12 }

            ]
        }, {
            "name": "France", "children": [
                { year: "2011", nrimmigrants: 3653, "stat": 12 },
                { year: "2012", nrimmigrants: 3862, "stat": 12 },
                { year: "2013", nrimmigrants: 4425, "stat": 13 },
                { year: "2014", nrimmigrants: 4284, "stat": 13 },
                { year: "2015", nrimmigrants: 4693, "stat": 13 },
                { year: "2016", nrimmigrants: 5159, "stat": 14 },
                { year: "2017", nrimmigrants: 4782, "stat": 13 },
                { year: "2018", nrimmigrants: 4276, "stat": 13 },
                { year: "2019", nrimmigrants: 4787, "stat": 13 },
                { year: "2020", nrimmigrants: 4053, "stat": 13 }

            ]
        }, {
            "name": "Italy", "children": [
                { year: "2011", nrimmigrants: 2443, "stat": 11 },
                { year: "2012", nrimmigrants: 2673, "stat": 11 },
                { year: "2013", nrimmigrants: 2960, "stat": 11 },
                { year: "2014", nrimmigrants: 3298, "stat": 12 },
                { year: "2015", nrimmigrants: 3544, "stat": 12 },
                { year: "2016", nrimmigrants: 4078, "stat": 13 },
                { year: "2017", nrimmigrants: 3655, "stat": 12 },
                { year: "2018", nrimmigrants: 3329, "stat": 12 },
                { year: "2019", nrimmigrants: 3822, "stat": 12 },
                { year: "2020", nrimmigrants: 3184, "stat": 12 }

            ]
        }]
};

let root = d3.hierarchy(data)
    .sum(d => d.hasOwnProperty("stat") ? d.stat : 0)
    .sort((a, b) => b.value - a.value);

let partition = d3.pack()
    .size([1500, 1500])
    .padding(10);

partition(root);

const svgWidth = 1600
const svgHeight = 1600

const paddingTopBottom = 80
const paddingLeftRight = 50

//Creating the svg in main
let svg = d3.select("main")
    .append("svg")
    .attr("width", svgWidth)
    .attr("height", svgHeight)
    .style("background-color", " black")

// Creating the circles in svg
svg.append("g")
    .selectAll('circle.node')
    .data(root.descendants())
    .enter()
    .append('circle')
    .classed('node', true)
    .attr('cx', d => d.x)
    .attr('cy', d => d.y)
    .attr('r', d => d.r)
    .attr("fill", "none")
    .attr("stroke", "white")
    .attr("stroke-width", "4")
    .attr("transform", `translate(${paddingLeftRight}, ${paddingTopBottom})`)
    
// Text: years that each circle represents
    svg.append("g")
       .selectAll('text')
       .data(root.descendants())
       .enter()
       .append("text")
       .attr('x', d => d.x)
       .attr('y', d => d.y)
       .text((d) => d.data.year)
       .attr("fill", d3.color("white"))
       .attr("font-size", 10)
       .attr("transform", `translate(${40}, ${paddingTopBottom})`)


//title of the svg
svg.append("g")
    .append("text")
    .attr("transform", `translate(800, ${paddingTopBottom - 40})`)
    .style("text-anchor", "middle")
    .attr("fill", "white")
    .attr("id", "t")
    .text("Immigration Number Per Country in US from 2011-2020")

// Text: Countries' names for each circle
svg.append("g")
    .append("text")
    .style("text-anchor", "middle")
    .attr("id", "Mexico")
    .attr("fill", " rgb(255, 246, 69)")
    .text("Mexico")

svg.append("g")
    .append("text")
    .style("text-anchor", "middle")
    .attr("id", "China")
    .attr("fill", " rgb(255, 18, 14)")
    .text("China")

svg.append("g")
    .append("text")
    .style("text-anchor", "middle")
    .attr("id", "India")
    .attr("fill", " rgb(255, 153, 37)")
    .text("India")

svg.append("g")
    .append("text")
    .style("text-anchor", "middle")
    .attr("id", "South-Korea")
    .attr("fill", " rgb(107, 255, 38)")
    .text("South Korea")

svg.append("g")
    .append("text")
    .style("text-anchor", "middle")
    .attr("id", "Canada")
    .attr("fill", " rgb(38, 255, 190)")
    .text("Canada")

svg.append("g")
    .append("text")
    .attr("transform", `translate(380,830)`)
    .style("text-anchor", "middle")
    .attr("fill", "white")
    .attr("font-size", 15)
    .attr("id", "UK")
    .attr("fill", " rgb(150, 192, 255)")
    .text("UK")

svg.append("g")
    .append("text")
    .style("text-anchor", "middle")
    .attr("id", "Germany")
    .attr("fill", "  rgb(180, 134, 255)")
    .text("Germany")

svg.append("g")
    .append("text")
    .style("text-anchor", "middle")
    .attr("id", "Japan")
    .attr("fill", " rgb(255, 124, 229)")
    .text("Japan")

svg.append("g")
    .append("text")
    .style("text-anchor", "middle")
    .attr("id", "France")
    .attr("fill", " rgb(202, 42, 74)")
    .text("France")

svg.append("g")
    .append("text")
    .style("text-anchor", "middle")
    .attr("id", "Italy")
    .attr("fill", " rgb(18, 150, 37)")
    .text("Italy")



